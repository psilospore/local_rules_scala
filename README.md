# Scala rules builds with Bloop

I am currently attempting a Bloop integration with the Scala rules for Bazel.
This repo demonstrates what happens with the bloop integration.
Running `bazel build //...` will build all targets and generate a `.bloop`.
I will commit .bloop to demonstrate the output generated by my changes.
Find more details in the offical PR (to be posted).

## Projects

### ABC
A basic linear depedency graph

C_run -> C -> B -> A


### BC_Z_disjoint

2 disjoint dependency graphs

C_run -> C -> B

Z_run -> Z

### ABC java

C_run -> C -> B -> A (java)


## Metals Aside
There's a `.bloop` Metals could be easy to integrate. I believe Mill generates bloop configs and Metals then parses that. I would want to probably run `bazel build //...` on Metals -> Import build.

However that would only happen if I choose to compile with bloop.
I spoke to Ittai about seperating the bloop generation into it's own phase. That way you can get metals support without compiling with bloop, but it's not so straightforward. Yuriy Yarosh suggested a completely different approach. I need to research that option more.

There are two cases:

1) Scala rules without Bloop. In that case I need to do more research about how to support Metals.
2) Scala rules with Bloop. Metals -> Import builds runs `bazel build //...`. `.bloop` is generated and have Metals handle that in the same way that Mill generates a bloop config file.